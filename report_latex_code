%++++++++++++++++++++++++++++++++++++++++
% Don't modify this section unless you know what you're doing!
\documentclass[letterpaper,11pt]{article}
\usepackage{scrextend}
\usepackage{multicol}
\usepackage{float}
\usepackage{booktabs}
\usepackage{array}
\usepackage{amsmath}
\usepackage{relsize}
\usepackage[table]{xcolor}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{tikz-cd}
\usepackage{tikz,tikz-3dplot}
\usetikzlibrary{arrows,decorations,patterns,shadings,calc,shapes}
\usepackage{pgfplots}
\pgfplotsset{compat=1.12}
\usepackage{mathrsfs}
\usepackage{nicematrix}
\usepackage[sorting=none]{biblatex}
\usepackage{cancel}
\bibliography{biblio.bib}
\usepackage{tabularx} % extra features for tabular environment
\usepackage{amsmath}  % improve math presentation
\usepackage{graphicx} % takes care of graphic including machinery
\usepackage[margin=1in,letterpaper]{geometry} % decreases margins
%\usepackage{cite} % takes care of citations
\usepackage[final]{hyperref} % adds hyper links inside the generated pdf file
\usepackage{bm}
\usepackage{caption}
\usepackage{subcaption}

\renewcommand{\labelitemi}{$\blacktriangleright$}
\hypersetup{
	colorlinks=false,       % false: boxed links; true: colored links
	linkcolor=blue,        % color of internal links
	citecolor=blue,        % color of links to bibliography
	filecolor=magenta,     % color of file links
	urlcolor=black         
}
\theoremstyle{definition}
\newtheorem{obs}{Observation}[section]
\newtheorem{prop}{Proposition}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{cor}{Corollary}[section]
\newtheorem{thm}{Theorem}[section]
\newcommand\ddfrac[2]{\frac{\displaystyle #1}{\displaystyle #2}}
\newcommand\x{\times}
\newcommand\y{\cellcolor{green!10}}
%+++++++++++++++++++++++++++++++++++++++
\begin{document}

\title{\Huge \textbf{Data Mining} \bigbreak \bigbreak \bigbreak \huge Team 8}
\author{Alberto Anzellotti, Silvio Martinico, Nicola Pitzalis}
\date{October 16, 2022}
\clearpage\maketitle
\thispagestyle{empty}

\begin{abstract}
\noindent
\large In this report, we look at a couple of datasets from Twitter. One contains information about users, while the other one contains information about tweets. The analysis proceeds in three main steps: Data Preprocessing (understanding and preparation), Clustering analysis and *something else*.
\end{abstract}
\begin{figure}[b]
    \centering
    \includegraphics[keepaspectratio=true,scale=0.3]{images/cherubino_pant541.eps}
\end{figure}

\clearpage
\tableofcontents
\clearpage
\section{Data Preprocessing}
In order to work on a dataset, we need first to understand what this dataset contains and we need to clear it and identify its problems.
\subsection{Data Understanding}
Let's understand the main properties of the two datasets.
\subsubsection{Users}
The dataset \verb|users.csv| is the smallest one; it provides information about Twitter users:

\begin{multicols}{2}
    \begin{itemize}
        \item \verb|id|: the ID of the user
        \item \verb|name|: the name of the user
        \item \verb|lang|: the language of the account
    \end{itemize}
\columnbreak
    \begin{itemize}
        \item \verb|bot|: $1$=bot, $0$=actual user
        \item \verb|created_at|: account signup date
        \item \verb|statuses_count|: number of tweets of the user
    \end{itemize}
\end{multicols}
\noindent
The first thing we did was to assess if the field \verb|id| is a real ID (if each value identifies exactly one record) or not. In order to do that, we just compared the length of the whole DataFrame with that of the unique values of the \verb|id| field and it comes out that they were equal. Hence, we substituted the pandas ids with the user's ids from Twitter. 
\medbreak \noindent
We do not want to start with a real preparation phase, however, before trying to understand the data, we want to solve some easy-to-fix issues in order to make the data more manageable.
\medbreak \noindent
The next field to analyze is \verb|name|. Having an ID which is a primary key, we don't need the names to be unique, neither we have particular requests for them; therefore, we just had a look at the field \verb|name| and saw that there is just one user with a null name. We decided to give this user a dummy name, i.e. "null\_user".
\medbreak \noindent
One interesting attribute is \verb|lang|. Using the command \verb|value_counts| on this field, we observed several things:
\begin{enumerate}
    \item There are two users who do not selected a language
    \item There are some not-existing ISO codes
    \item There are some variant of the same language (for instance: \verb|en|, \verb|en-gb|, \verb|en-GB|)
\end{enumerate}
The third problem was fixed setting every variant of a language to its main language, while the languages in the first two categories were transformed into the dummy language "wrl" (which stays for "wrong language"). However, the amount of records which language belongs to any of the three categories above is very small, so this is not a real problem.
\smallbreak \noindent
After these small adjustments, we gave a look at the languages distribution via a bar plot, where the scale of the $y$ axis was set to logarithmic for a better visualization. In the plot reported below, we can see (as we saw from the description of \verb|lang|) that the most frequent language is the English and in the top three languages we have also Italian and Spanish, respectively one and two orders of magnitude below the top language. We can also observe that, approximately half of the languages are negligible (below the $0,1\%$ of the users)  

\begin{minipage}[t]{0.43\textwidth}
\includegraphics[width=\textwidth]{images/users/lang.png}
\captionof{figure}{\small Number of users for each language}
\end{minipage}\hspace{.7cm}
\begin{minipage}[t]{0.43\textwidth}
\includegraphics[width=\textwidth]{images/users/bot.png}
\captionof{figure}{\small Number of bot and non-bot users}
\end{minipage}

\bigbreak \noindent
The column \verb|bot| has no problems and, from the simple bar plot above, we can notice that we have almost an equal number of bot and non-bot users.

\medbreak \noindent
For the field \verb|statuses_count|, we observed that there is a small percentage of null values ($\approx 3,4\% $). We didn't see a trivial and immediate solution to this problem, so we didn't handle it at the time.
\medbreak \noindent
Regarding the \verb|created_at| field, we observed that it's a \verb|datetime| object and so we analyzed it exploiting this property.
\smallbreak \noindent
First, we looked at the number of account created each year.

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.45\linewidth]{images/users/year.png}
    \label{fig:comparison}
    \caption{Number of enrollments per year}
\end{figure}

\smallbreak \noindent
What this bar chart highlights is that we have a kind of bimodal distribution, with two peaks in the years 2017 and 2019. Clearly, this plot does not give us enough information, so we want to increase the granularity. Hence, for each year, we looked at the number of enrollments day by day.
\smallbreak \noindent
In Figure \ref{megaplot} we can observe some strange things. We have a small number of accounts created per day but there are some, apparently anomalous peaks. We will do a further analysis on this strange behaviour later.



\begin{figure}[h!]
    \centering
    \includegraphics[width=1\linewidth]{images/users/megaplot.png}
    \caption{Number of sign-up per day, divided by year}
    \label{megaplot}
\end{figure}





\subsubsection{Tweets}
\subsection{Data preparation}
\subsubsection{Data cleaning}

\section{Clustering Analysis}

\section{Idk}

\section{Conclusions}








\clearpage
\printbibliography
\clearpage

\end{document}
